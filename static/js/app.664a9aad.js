(function(){"use strict";var e={1808:function(e,t,r){var n=r(6369),o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("DownloadTable",{attrs:{pleaseRefresh:e.pleaseRefresh},on:{changeDir:e.onChangeDir}}),t("UploadFile",{attrs:{uploadDir:e.currDirPath},on:{doRefresh:e.onDoRefresh}}),t("MsgBox")],1)},s=[],a=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("File to download")]),e._v(" Current dir: "+e._s(e.pathTreeObj.currentDirName)+" "),t("button",{staticClass:"u-right-margin-small",on:{click:function(t){return e.refresh()}}},[e._v("refresh")]),t("button",{on:{click:function(t){return e.backToParentDir()}}},[e._v("back to parent dir")]),t("br"),t("table",[e._m(0),e.pathTreeObj.subFolderList?e._l(e.pathTreeObj.subFolderList,(function(r){return t("tr",{key:r},[t("td",[e._v("Dir")]),t("td",[e._v(e._s(r))]),t("td",{on:{click:function(t){return e.openDir(r)}}},[t("button",[e._v("open")])])])})):e._e(),e._l(e.pathTreeObj.subFileList,(function(r){return t("tr",{key:r},[t("td",[e._v("File")]),t("td",[e._v(e._s(r))]),t("td",[t("a",{attrs:{href:e.getDownloadUrl(r)}},[t("button",[e._v("download")])])]),t("button",{on:{click:function(t){return e.deleteFile(r)}}},[e._v("delete")])])}))],2)])},i=[function(){var e=this,t=e._self._c;return t("tr",[t("th",[e._v("Type")]),t("th",[e._v("Name")]),t("th",[e._v("Operation")])])}],l=r(6265),u=r.n(l),c={name:"DownloadTable",data(){return{pathTreeObj:{currentDirName:"./Test",subFileList:["demo.png"],subFolderList:["testDir"]},ROOT_PATH:"./files"}},props:["pleaseRefresh"],watch:{"pathTreeObj.currentDirName":{handler(e){this.$emit("changeDir",e)}},pleaseRefresh:{handler(){this.refresh()}}},methods:{getPathTreeObj(e){u().get("path",{params:{dirPath:e}}).then((e=>{console.log("get path ok!:",e.data),this.pathTreeObj=e.data}),(e=>{console.log("get path err:@@@",e.response.data)}))},backToParentDir(){if(this.pathTreeObj.currentDirName===this.ROOT_PATH)return;const e=this.pathTreeObj.currentDirName.split("/");e.pop();let t=e.join("/");this.getPathTreeObj(t)},openDir(e){let t=this.pathTreeObj.currentDirName+"/"+e;this.getPathTreeObj(t)},getDownloadUrl(e){let t=this.pathTreeObj.currentDirName+"/"+e;return"download?filePath="+t},deleteFile(e){let t=this.pathTreeObj.currentDirName+"/"+e;u().post("delete",null,{params:{filePath:t}}).then((e=>{console.log("delete file ok! ",e.data),this.refresh()}),(e=>{console.log("delete file err:@@@",e.response.data)}))},refresh(){this.getPathTreeObj(this.pathTreeObj.currentDirName)}},mounted(){this.getPathTreeObj(this.ROOT_PATH)}},p=c,d=r(3736),h=(0,d.Z)(p,a,i,!1,null,null,null),f=h.exports,g=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("Upload File")]),t("form",{ref:"myForm"},[t("input",{ref:"file",attrs:{type:"file",multiple:"multiple"},on:{change:e.onChange}}),t("br")]),t("button",{attrs:{type:"button"},on:{click:function(t){return e.uploadAll()}}},[e._v("Upload")]),e._l(e.uploadList,(function(r){return t("div",{key:r.uid},[e._v(" file name: "+e._s(r.name)+", status: "+e._s(r.status)+", progress: "+e._s(r.percentage)+", res: "+e._s(r.res)+" "),t("button",{on:{click:function(t){return e.remove(r)}}},[e._v("delete")])])}))],2)},m=[],b={name:"UploadFile",props:["uploadDir"],data(){return{uploadList:[],tempIndex:1}},computed:{uploadUrl(){return"upload?dirPath="+this.uploadDir}},methods:{onChange(){let e=this.$refs.file.files;for(let t=0;t<e.length;t++)this.handleStart(e[t]);this.$refs.myForm.reset()},handleStart(e){e.uid=Date.now()+this.tempIndex++;let t={status:"ready",name:e.name,size:e.size,percentage:0,uid:e.uid,raw:e};this.uploadList.push(t)},uploadAll(){let e=this.uploadList;for(let t=0;t<e.length;t++)"ready"==e[t].status&&this.post(e[t])},post(e){if(e.signal=u().CancelToken.source(),!e)return;const t=new FormData;t.append("file",e.raw);const r={cancelToken:e.signal.token,onUploadProgress:t=>{let r=t.lengthComputable?t.total:t.target.getResponseHeader("content-length")||t.target.getResponseHeader("x-decompressed-content-length");null!==r&&(e.percentage=Math.round(100*t.loaded/r),e.status="uploading")}};u().post(this.uploadUrl,t,r).then((t=>{console.log("upload file ok! ",t.data),this.$emit("doRefresh"),e.status="success"}),(t=>{u().isCancel(t)?console.log("Request canceled:"):(console.log("upload file err! @@@",t.response.data),e.status="fail",e.res=t)}))},remove(e){e.signal.cancel("Request canceled by user.");let t=this.uploadList;t.splice(t.indexOf(e),1)}}},v=b,_=(0,d.Z)(v,g,m,!1,null,"3998b71a",null),T=_.exports,O=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("Message Box")]),t("span",[e._v("messages:")]),t("button",{on:{click:function(t){return e.getMsgs()}}},[e._v("refresh")]),t("ul",e._l(e.messages,(function(r){return t("li",{key:r},[t("button",{on:{click:function(t){return e.copy2clipBoard(r)}}},[e._v(" copy")]),e._v("Â  "+e._s(r)+" ")])})),0),t("label",[e._v("new message: ")]),t("button",{on:{click:function(t){return e.pasteFromClipboard()}}},[e._v(" paste from clipboard")]),t("br"),t("textarea",{ref:"msgInput",attrs:{id:"msgInput",rows:"4",cols:"50"}}),t("br"),t("button",{on:{click:e.putMsg}},[e._v("submit")])])},D=[],w={name:"MsgBox",data(){return{messages:["test message"],textarea:""}},methods:{getMsgs(){u().get("/messages").then((e=>{console.log("get massages ok!",e.data),this.messages=e.data.messages,console.log("@@@",this.messages)}),(e=>{console.log("get massages err",e.message)}))},putMsg(){let e=this.$refs.msgInput.value;const t={msg:e};u().post("/messages",t).then((e=>{console.log("post message ok! @@@",e.data),this.getMsgs()}),(e=>{console.log("post message err @@@",e.response.data)}))},async copy2clipBoard(e){try{const t=await navigator.permissions.query({name:"clipboard-write"});if("granted"!==t.state&&"prompt"!==t.state)throw"permissions deny";navigator.clipboard.writeText(e),console.log("text copied!")}catch(t){console.log("fail to copy @@@",t),alert("fail to copy @@@ "+t)}},async pasteFromClipboard(){try{const e=await navigator.clipboard.readText();this.$refs.msgInput.value=e,console.log("Text pasted.")}catch(e){console.log("Failed to read clipboard. Using execCommand instead."),this.$refs.msgInput.focus();const t=document.execCommand("paste");console.log("document.execCommand result: ",t)}}},mounted(){this.getMsgs()}},y=w,k=(0,d.Z)(y,O,D,!1,null,null,null),j=k.exports,x={name:"App",components:{DownloadTable:f,UploadFile:T,MsgBox:j},data(){return{currDirPath:"",pleaseRefresh:""}},methods:{onChangeDir(e){this.currDirPath=e},onDoRefresh(){this.pleaseRefresh=new Date}}},P=x,F=(0,d.Z)(P,o,s,!1,null,null,null),R=F.exports;n.ZP.config.productionTip=!1,new n.ZP({render:e=>e(R)}).$mount("#app")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.m=e,function(){var e=[];r.O=function(t,n,o,s){if(!n){var a=1/0;for(c=0;c<e.length;c++){n=e[c][0],o=e[c][1],s=e[c][2];for(var i=!0,l=0;l<n.length;l++)(!1&s||a>=s)&&Object.keys(r.O).every((function(e){return r.O[e](n[l])}))?n.splice(l--,1):(i=!1,s<a&&(a=s));if(i){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,o,s]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,s,a=n[0],i=n[1],l=n[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(l)var c=l(r)}for(t&&t(n);u<a.length;u++)s=a[u],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(c)},n=self["webpackChunkfile_transfer_view"]=self["webpackChunkfile_transfer_view"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(1808)}));n=r.O(n)})();
//# sourceMappingURL=app.664a9aad.js.map